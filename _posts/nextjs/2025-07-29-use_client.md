---
layout: post
title: NEXTJS - USE CLIENT
categories: NEXTJS
---
# Next.js 에서 `"use client"` 지시어가 압축 같은 최적화에도 영향을 줄까?

결론부터 말하면, **"use client"는 단순히 CSR 컴포넌트임을 알려주는 역할**이고,
**압축이나 번들 최적화 같은 기능은 직접적으로 하진 않는다**.

하지만, 결과적으로 몇 가지 **간접적인 성능 최적화**는 생긴다.

---

## "use client"가 하는 일

* 기본적으로 Next.js는 컴포넌트를 **서버 컴포넌트**로 처리하려고 한다
* 근데 브라우저에서만 동작하는 기능 (`useState`, `useEffect`, `onClick` 등)을 쓸 경우엔 **클라이언트에서만 실행돼야 함**
* 그래서 컴포넌트 파일 맨 위에 `'use client'`를 붙이면, "이건 클라이언트 컴포넌트야" 라고 Next.js한테 알려주는 거임

```tsx
'use client';

import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);
  return <button onClick={() => setCount(count + 1)}>{count}</button>;
}
```

---

## 압축, 트리쉐이킹, 번들 최적화랑은 무슨 관계?

* `"use client"` 자체가 소스를 압축하거나 트리쉐이킹 하진 않음
* 그런 일은 Next.js 내부의 **Webpack + Terser** 빌드 도구가 처리함

하지만 **간접적인 최적화 효과는 있음**

---

## 간접적인 효과들

### 1. 클라이언트 번들로 따로 분리됨

* `'use client'` 컴포넌트는 **클라이언트용 JS 번들로만 빌드됨**
* 그래서 서버 관련 코드나 무거운 라이브러리를 클라이언트에 굳이 포함시키지 않음

### 2. 서버/클라이언트 나눠짐으로써 전체 번들 효율 증가

* 서버 컴포넌트는 HTML만 뿌려줘서 로딩이 빠름
* 클라이언트 컴포넌트는 꼭 필요한 부분만 JS 번들에 포함됨

### 3. 결과적으로 트리쉐이킹, 압축에 도움됨

* `'use client'`로 인해 번들 단위가 작아지고,
* 실제로 쓰이지 않는 모듈이나 코드가 더 잘 제거됨

---

## 요약

| 항목           | `'use client'`가 영향 있음? | 설명                    |
| ------------ | ---------------------- | --------------------- |
| 클라이언트 렌더링 설정 | ✅                      | CSR로 명시됨              |
| 직접 압축 기능     | ❌                      | 빌드 도구가 따로 처리함         |
| 번들 분리 최적화    | ✅                      | 서버/클라 코드 분리됨          |
| 트리 쉐이킹       | ✅ (간접)                 | 클라 번들이 작아지고 효율적 처리    |
| 성능 최적화       | ✅ (간접)                 | SSR + CSR 조합으로 UX 좋아짐 |

---

`'use client'` 자체가 마법 같은 최적화를 해주는 건 아니지만,
**Next.js가 똑똑하게 번들을 나누고 불필요한 코드를 줄이는 걸 도와주는 중요한 표시**라고 보면 됨.
