---
layout: post
title: AWS - ElastiCache
categories: AWS
---

# AWS ElastiCache 정리

---

## ✅ ElastiCache란?

> AWS에서 제공하는 인메모리 캐시 서비스였다.
> Redis 또는 Memcached를 **매니지드 형태**로 제공해줬다.

* 빠른 응답이 필요한 경우, DB 대신 메모리에서 읽어오게 해주는 캐시 서버 역할이었다.
* DB 부하 분산, 세션 저장, 레이트 리밋 등 다양한 실시간 처리에 사용되었다.

---

## 💡 왜 ElastiCache를 쓰는가?

| 목적      | 설명                                 |
| ------- | ---------------------------------- |
| 캐시      | 자주 조회되는 데이터를 DB 대신 메모리에 저장해서 성능 향상 |
| 세션 저장   | 로그인 세션 같은 임시 데이터를 중앙에서 관리          |
| 카운팅     | 접속자 수, 좋아요 수 등 실시간 숫자 처리           |
| 실시간 메시징 | Redis Pub/Sub 이용한 실시간 알림 처리        |
| 레이트 리밋  | 일정 요청 횟수 초과 시 차단 처리                |

---

## 🔧 지원 엔진 비교: Redis vs Memcached

| 항목      | Redis                           | Memcached    |
| ------- | ------------------------------- | ------------ |
| 자료구조    | 다양한 자료구조 지원 (List, Set, Hash 등) | 단순 key-value |
| 지속성     | ✅ 지원 (RDB, AOF)                 | ❌ 없음         |
| 복제      | ✅ 가능                            | ❌ 없음         |
| 고가용성    | ✅ 멀티 AZ + 장애조치 가능               | ❌ 불가         |
| 샤딩      | ✅ 지원 (클러스터 모드)                  | ✅ 단순 분산 지원   |
| Pub/Sub | ✅ 지원                            | ❌ 없음         |
| 적합한 용도  | 실시간 처리, 복잡한 구조                  | 단순 캐시용       |

> 실제 운영 환경에서는 거의 대부분 Redis를 썼다.

---

## 🧠 구성 요소

* **클러스터**: Redis 또는 Memcached 노드들의 모음
* **샤딩**: 키 범위를 나눠 노드 간 분산 저장
* **레플리카**: 읽기 전용 복제 노드 (Redis 전용)
* **노드 타입**: 메모리 크기/성능 단위별 EC2 스펙 선택 가능

---

## 🔥 실제 사용 사례

### 1. 접속자 수 카운팅

* Redis INCR 기능 사용해서 빠르게 사용자 수 증가 처리

### 2. 로그인 세션 저장

* 사용자의 세션 정보를 Redis에 저장해서, EC2 여러 대에서 공유 가능

### 3. 인기 데이터 캐싱

* 상품 정보, 댓글, 조회수 등 자주 바뀌지 않는 데이터는 캐시에 보관

### 4. 레이트 리밋

* 사용자별 요청 횟수를 Redis로 관리해서, 일정 초과 시 차단

### 5. 실시간 채팅 / 알림

* Redis Pub/Sub 기능 사용해서 채팅 메시지 브로드캐스트 처리

---

## 📌 주의할 점

| 항목                | 설명                           |
| ----------------- | ---------------------------- |
| TTL 설정            | 만료 시간 설정 안 하면 메모리 고갈 위험 있음   |
| Redis는 단일 마스터     | 쓰기 병목 발생 가능 → 클러스터 모드로 분산 필요 |
| 멀티 AZ 설정 필요       | 안 하면 AZ 장애 시 캐시 전체 장애 가능성 있음 |
| 백업 기능 (Redis만 지원) | 자동 스냅샷 설정 가능 (필수는 아님)        |

---

## 💰 요금 구조

* **노드 시간당 과금** (EC2와 유사한 방식)
* **클러스터 개수 × 노드 스펙** 기준 요금
* 데이터 전송량은 동일 VPC 내면 무료, 외부면 요금 발생 가능

---

## ✅ 요약

| 항목    | 내용                                |
| ----- | --------------------------------- |
| 목적    | 인메모리 캐시로 빠른 응답 처리, DB 부하 분산       |
| 사용 엔진 | Redis (복잡한 기능), Memcached (단순 캐시) |
| 실제 용도 | 세션 저장, 카운터, 실시간 알림, 캐시, 레이트 리밋    |
| 강점    | 빠른 속도, 다양한 구조 지원, 실시간 처리에 적합      |

> 빠르고 가볍고, 고가용성도 가능한 인메모리 캐시가 필요하다면 ElastiCache (특히 Redis)가 딱이었다.
