---
layout: post
title: ARCHITECTURE - APP IN APP
category: ARCHITECTURE
---


앱인앱(App-in-App)을 구현할 때, 우리가 만든 앱 기능을 **타사 앱 안에 포함시키는 구조**는 생각보다 다양하게 접근할 수 있다. 내부적으로는 두 가지 방식으로 나뉜다: **SDK 형태**로 제공하거나, **웹뷰 URL**을 통해 임베딩하는 방식이다.

---

## 1. SDK 제공 방식 (Native App-in-App)

우리 앱의 핵심 기능(예: 채팅, 결제, 로그인 등)을 **라이브러리 형태로 배포**해서, 타사 앱이 그걸 설치해서 직접 사용하는 방식.

### 예시 흐름
```ts
// 외부 앱에서 SDK 설치 후 사용
import { OurSdk } from 'our-sdk';

OurSdk.init({ apiKey: 'xxx' });
OurSdk.openChat();
```

### 구현 방식
- Android: `.aar` 파일로 제공
- iOS: `.xcframework` 또는 CocoaPod
- React Native, Flutter: Plugin 형식으로 래핑

### 장점
- 네이티브 퍼포먼스 확보
- UI/UX 완전 제어 가능
- 내부 API 연동까지 패키지화

### 단점
- 배포/버전관리 복잡
- 외부 앱 빌드 과정에 영향 받음
- 보안 처리 신경 써야 함 (API Key, 세션 등)

---

## 2. 웹뷰 임베딩 방식 (Web 기반 App-in-App)

타사 앱에서 우리 서비스 URL을 **웹뷰로 띄우는 방식**이다. 빠르고 쉽게 통합할 수 있음.

```tsx
<WebView source={{ uri: "https://our-app.com/embed/chat" }} />
```

### 장점
- 통합이 쉽고 빠름
- 버전 관리가 서버 사이드에서 끝남
- 외부 앱 수정 거의 없음

### 단점
- 네이티브 UI보다 반응성 떨어짐
- 플랫폼(WebView) 이슈 대응 필요 (세션, 쿠키 등)
- UX 통합 한계

---

## 언제 어떤 방식 쓸지?

| 상황 | SDK 방식 | WebView 방식 |
|------|-----------|---------------|
| 성능 중요할 때 | ✅ | ❌ |
| 빠른 통합 원할 때 | ❌ | ✅ |
| 외부 앱이 잦은 업데이트 어려울 때 | ✅ | ✅ |
| 보안상 민감한 처리 | ✅ | ⚠️ |

---

## 우리가 제공할 수 있는 기능 예

- ✅ 채팅 모듈 (고객센터, 상담 등)
- ✅ 간편 결제 모듈
- ✅ 쇼핑/브라우징 서비스
- ✅ OAuth 기반 로그인

---

## 보안/운영 고려사항

- JWT or OAuth로 사용자 인증 관리
- SDK 내 하드코딩 금지 (API Key 노출 방지)
- 가능한 민감 로직은 서버에서 처리
- WebView 세션 처리 주의 (특히 iOS)

---

## 참고로 알아두면 좋은 키워드

| 개념 | 설명 |
|------|------|
| SDK | 앱에 포함 가능한 독립 기능 묶음 |
| WebView | 앱 내에서 외부 웹을 띄우는 컴포넌트 |
| OAuth | 외부 앱이 인증된 유저로 접근하도록 해주는 인증 방식 |
| Deep Link | 앱 내부 특정 화면으로 바로 연결되는 링크 |

---

## 마무리

타사 앱에 우리가 만든 기능을 제공하려면, SDK로 묶든, 웹으로 띄우든 간에 **확장성과 유지보수 고려가 중요**하다. 단순히 붙이는 게 목적이 아니라, 통합 후 얼마나 안정적이고 자연스럽게 동작하느냐가 핵심이다.

필요하다면 SDK 구조 설계, 버전 전략, 문서화 방식까지 따로 정리해도 된다.
