---
layout: post
title: AWS - 배치그룹 및 배치전략
categories: AWS
---

# EC2 배치 그룹(Placement Group) & 배치 전략(Placement Strategy) 정리

## ✅ 배치 그룹이 뭐냐?

* EC2 인스턴스를 물리적으로 **어떻게 배치할지** AWS에 알려주는 기능
* "얘네는 가깝게 붙여줘", "멀리 떨어뜨려줘", "나눠서 격리시켜줘" 같은 요구사항을 반영함
* 결국 **성능을 끌어올릴지**, **장애에 강하게 설계할지** 선택하는 거임

---

## ✅ 배치 전략 종류 (Placement Strategy)

| 전략명           | 특징/설명                                            |
| ------------- | ------------------------------------------------ |
| **Cluster**   | 인스턴스를 물리적으로 **가깝게** 붙임 (같은 랙 같은 느낌) → 지연 ↓, 속도 ↑ |
| **Spread**    | 서로 **완전히 다른 하드웨어에 분산**해서 배치 → 장애에 강함             |
| **Partition** | 여러 파티션으로 나눠서 하드웨어 단위로 고립시킴 → 대규모 분산 시스템에 적합      |

---

### 1. 🧩 Cluster 전략

* 인스턴스들 전부 가까이 묶어놓음 (네트워크 지연 거의 없음)
* 병렬 처리 작업, 머신러닝 학습, 고성능 컴퓨팅(HPC)에 좋음
* 단점: **같은 하드웨어에 있으니 하나 죽으면 다 같이 죽을 수도 있음**

![scrennsh](/public/img/20250723/20250723_01.png)
---

### 2. 🌎 Spread 전략

* EC2 인스턴스를 전부 **서로 다른 하드웨어/랙**에 분산시킴
* 장점: 하나 죽어도 나머지 영향 없음 → 고가용성 확보
* 단점: AZ당 최대 7개까지만 배치 가능

![scrennsh](/public/img/20250723/20250723_02.png)

---

### 3. 🧱 Partition 전략

* 인스턴스들을 여러 파티션으로 나눠서 배치함
* 각 파티션은 하드웨어적으로 완전 분리됨
* Kafka, Hadoop, Cassandra 같은 **분산 시스템에서 자주 씀**
* 파티션끼리는 완전히 다른 랙/서버에 배치됨
* 각 파티션 내부는 묶여있지만, 서로 간 영향 X

![scrennsh](/public/img/20250723/20250723_03.png)

---

## ✅ 요약표

| 전략        | 장점              | 단점               | 추천 케이스             |
| --------- | --------------- | ---------------- | ------------------ |
| Cluster   | 네트워크 속도, 지연 최소화 | 장애 시 리스크 큼       | HPC, ML 학습 등       |
| Spread    | 고가용성, 장애 분산     | AZ당 7개 제한        | 웹서버, 소규모 중요 서버들    |
| Partition | 하드웨어 고립성, 안정성↑  | 설계 복잡, 규모 클수록 유리 | Cassandra, Kafka 등 |

---

## ✅ 언제 어떤 전략 쓰냐?

* 빠른 통신이 중요하다 → **Cluster**
* 장애 하나도 못 견딘다 → **Spread**
* 대규모 분산 시스템이다 → **Partition**

---

> 결국 이건 인스턴스들 물리적으로 **어디 어떻게 배치할지** 정하는 거고,
> **성능 ↔ 안정성** 중에 뭐에 더 집중하냐에 따라 전략을 골라야 됨

필요하면 Terraform이나 AWS CLI로 만드는 방법도 정리해줄게 💡
