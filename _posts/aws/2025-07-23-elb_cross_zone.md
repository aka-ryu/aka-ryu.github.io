---
layout: post
title: AWS - 로드밸런서 Cross Zone
categories: AWS
---

## 크로스존 로드밸런싱이란?

서로 다른 AZ(가용영역)에 있는 인스턴스들에 대해,
로드밸런서가 트래픽을 **균등하게 분산**시켜주는 기능이다.

예를 들어 AZ1에 유입된 트래픽도 AZ2에 있는 EC2로 보낼 수 있게 만드는 기능이다.

---

## 예시로 이해하기

### ❌ 크로스존 기능 꺼져 있을 때

```
      AZ1                  AZ2
   [ EC2-1 ]           [ EC2-2 ]
      ↑                    ↑
  [  LB (AZ1) ]       [ LB (AZ2) ]

→ AZ1에서 들어온 요청은 EC2-1에서만 처리
→ AZ2에서 들어온 요청은 EC2-2에서만 처리
→ 특정 AZ에 요청이 몰리면 부하 불균형 생김
```

### ✅ 크로스존 기능 켜진 경우

```
      AZ1                  AZ2
   [ EC2-1 ]           [ EC2-2 ]
      ↑   ↖            ↗   ↑
  [  LB (AZ1) ]  ←→  [ LB (AZ2) ]

→ AZ1에서 들어온 요청도 EC2-2에서 처리 가능
→ 모든 EC2 인스턴스에 균형 있게 트래픽 분산
```

---

## 로드밸런서별 동작 정리

| 로드밸런서 | 기본값  | 설정 가능 여부 | 비고                   |
| ----- | ---- | -------- | -------------------- |
| ALB   | 활성화  | 끌 수 없음   | 항상 적용됨               |
| NLB   | 비활성화 | 설정 가능    | AZ 간 데이터 전송 요금 발생 가능 |
| CLB   | 비활성화 | 설정 가능    | 오래된 방식, 신규엔 권장 안 함   |

---

## 왜 써야 하는가?

* AZ 간 요청 분산이 되지 않으면 특정 AZ에 과부하 생김
* 모든 EC2 자원을 효율적으로 쓰기 위해 필요함
* AZ 하나에 장애가 생겨도 다른 AZ에서 트래픽 커버 가능함

---

## 요약

* 크로스존 로드밸런싱은 여러 AZ에 있는 인스턴스들로 트래픽을 분산시키는 기능이다.
* ALB는 기본 적용, NLB는 수동 설정 필요
* 분산 구조 설계 시 필수로 고려해야 할 항목이다.
