---
layout: post
title: AWS - Hibernate 절전모드
categories: AWS
---
## AWS 절전모드(Hibernate)란?

EC2 인스턴스를 중지(Stop)할 때, 메모리(RAM) 상태를 유지해서 다음에 시작(Start)할 때 부팅 시간 없이 빠르게 복원되는 기능이야. 일반 중지와 다르게, 인스턴스의 현재 상태(메모리, 프로세스 등)를 저장해서 재부팅 없이 바로 원래 상태로 복원되는 거지.

---

## Hibernate를 사용하는 이유

1. **빠른 복원 시간**

   * 일반적으로 EC2 중지 후 시작하면 OS 부팅, 앱 로딩 시간이 걸림
   * Hibernate는 메모리 상태를 그대로 보존해서 재시작 시 거의 즉시 복원됨

2. **비용 절감**

   * Hibernate 상태에서는 EC2 인스턴스 요금이 과금되지 않고 EBS 볼륨만 비용 발생
   * 정기적으로 중지/재시작이 필요한 워크로드에 적합

3. **상태 유지**

   * 웹 서버나 API 서버 등에서 애플리케이션 상태나 세션을 메모리에 보관하는 경우 유리
   * 작업 도중 중단해도 다음에 이어서 작업 가능

4. **자동화된 Dev/Test 환경에 유리**

   * 개발 및 테스트 환경에서 사용하던 상태 그대로 보존 가능해서 효율적임

---

## 사용 조건 및 제한 사항

* 지원하는 인스턴스 타입: C3, C4, M3, M4, R3, R4, T2, T3, T3a 등 일부
* 루트 볼륨은 반드시 EBS여야 하고, 암호화가 필수 (Hibernate 상태 저장을 위해)
* 인스턴스 시작 시 `--hibernate` 옵션 필요 (CLI 또는 콘솔에서 설정 가능)
* 중지 후 최대 60일까지만 Hibernate 상태 보존됨

---

## 실제 사용 시나리오

### 1. 개발용 인스턴스

* 개발자가 퇴근 전 인스턴스를 Hibernate로 중지하고, 다음날 출근해서 빠르게 이어서 작업

### 2. 긴 실행 시간이 필요한 머신러닝/데이터 분석

* 중간 결과나 세션을 유지해야 할 때 유리
* 중단 시 메모리 상태를 저장해두고 다음에 재개

### 3. 비용 최적화

* 야간이나 주말에 사용하지 않는 워크로드를 Hibernate로 자동 중지
* 필요할 때만 복원해서 비용 절감

### 4. 사용자 세션 유지가 중요한 앱 서버

* EC2 메모리에 세션이 저장되는 웹 앱이라면, Hibernate로 세션 보존 가능

---

## 요약

Hibernate는 EC2 인스턴스의 상태를 그대로 저장하고, 다음에 빠르게 복원할 수 있게 해주는 절전모드야. 빠른 복원, 상태 유지, 비용 절감의 장점이 있고, Dev/Test 환경, 사용자 세션 유지, 비용 최적화에 특히 유리해.

정리하면 "필요할 때만 빠르게 깨우는 절전 모드"라고 보면 돼.
