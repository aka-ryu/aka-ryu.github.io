---
layout: post
title: AWS - EFS
categories: AWS
---
## EFS (Elastic File System) 쉽게 정리해봤다

EFS는 AWS에서 제공하는 공유 폴더 서비스라고 보면 된다. EC2 여러 대가 동시에 붙어서 같은 파일을 읽고 쓸 수 있는 구조다. 리눅스 환경에서는 그냥 NFS 마운트하듯이 쓰면 된다.

---

## ✅ EFS는 뭐냐?

* EC2 여러 대에서 동시에 접근 가능한 **네트워크 파일 시스템(NFS)**
* 자동으로 **크기 확장**되고, 스토리지 용량 미리 지정할 필요 없음
* 여러 AZ에 걸쳐 복제돼서 **내구성/가용성** 높음
* 사용한 만큼만 과금됨 (GB 단위)

---

## 📦 EBS / S3 / EFS 비교

| 항목  | 설명                         |
| --- | -------------------------- |
| EBS | EC2 1대 전용 디스크, 빠르지만 공유 안 됨 |
| S3  | 객체 저장소 (버킷), API 기반으로 접근   |
| EFS | EC2 여러 대가 동시에 접근하는 공유 폴더   |

---

## 🔧 어떻게 쓰냐?

1. AWS 콘솔에서 EFS 생성
2. 마운트 대상(AZ), 보안 그룹 설정
3. EC2에 NFS 클라이언트 설치
4. `mount -t nfs4` 명령어로 연결 (예: `/mnt/efs`)

---

## 🧪 사용 예시들

### 📌 웹 서버 여러 대가 이미지 공유해야 할 때

* 업로드한 이미지들을 모든 EC2 인스턴스에서 바로 보여줘야 한다면 → EFS 마운트

### 📌 머신러닝 노드들끼리 데이터셋 공유

* 학습용 CSV, 이미지 같은 대형 데이터셋을 공유할 때 EFS가 편함

### 📌 빌드 서버 ↔ 테스트 서버 간 아티팩트 공유

* 빌드 결과물 저장해두고 다른 서버에서 바로 실행 가능

### 📌 NAS 쓰던 레거시 시스템 클라우드로 이관

* 온프레미스에 있던 NFS 시스템을 클라우드에서 똑같이 구현 가능

---

## 🔐 보안은?

* EC2와 EFS 사이 전송도 암호화 가능 (TLS)
* 저장 시 암호화도 가능 (KMS 사용)
* IAM + 보안그룹 조합으로 접근 제어 세밀하게 가능

---

## 💰 요금은?

* 저장된 데이터 용량(GB) 기준으로 과금됨
* 자주 접근하지 않는 데이터는 "Infrequent Access(IA)"로 요금 절감 가능
* 단일 AZ만 사용하는 One-Zone EFS는 더 저렴함 (단, 내구성은 일반 EFS보다 낮음)

---

## ✅ 요약

* EFS는 **EC2 여러 대에서 공유하는 폴더**다
* 웹서버, 머신러닝, CI/CD 빌드처럼 **파일 공유가 필요한 상황**에 적합
* 쓰기도 쉽고, 용량 자동으로 늘어나고, 속도도 괜찮고, 관리 거의 필요 없음

이런 상황이면 S3보다 EFS가 훨씬 편하다.
