---
layout: post
title: AWS - EBS볼륨
categories: AWS
---
## AWS EBS (Elastic Block Store)란?

AWS EBS는 EC2 인스턴스에 연결하는 블록 스토리지 서비스다.
하드디스크처럼 EC2에 부착하여 OS, 데이터, DB 등을 저장하는 용도로 사용된다.

---

## 주요 특징

1. **블록 스토리지**

   * 파일 단위가 아닌 블록 단위로 데이터를 읽고 쓴다.

2. **지속성 (Durability)**

   * EC2 인스턴스를 중지하거나 종료해도 EBS는 삭제되지 않고 데이터를 유지한다.

3. **독립적인 관리**

   * EC2와 분리하여 생성, 삭제, 백업 등의 관리가 가능하다.

4. **스냅샷 지원**

   * 현재 상태를 AWS S3에 백업하는 스냅샷을 생성할 수 있다.

5. **AZ 단위로 존재**

   * 특정 Availability Zone에 귀속되므로, 다른 AZ의 인스턴스에는 직접 연결할 수 없다.

---

## EBS와 EC2의 관계 (릴레이션십)

EBS는 EC2 인스턴스에 부착하는 외장 하드디스크와 같은 개념이다.
EC2 인스턴스는 기본적으로 하나의 루트 볼륨(EBS)을 가지고 시작하며, 여기에 OS가 설치된다.
EC2 인스턴스에는 여러 개의 EBS 볼륨을 추가로 연결할 수 있으며, `/dev/xvdf`, `/dev/xvdg` 등으로 마운트된다.

EC2 인스턴스가 종료되어도 EBS는 독립적으로 유지되므로 데이터를 보존하거나 재활용할 수 있다.
EC2를 재시작하거나 새로 만들 때 기존 EBS를 연결하여 이전 상태를 복원하는 것도 가능하다.

### 릴레이션 구조 텍스트 이미지

```
 ✅ EC2 1대가 여러 개의 EBS를 붙이는 구조

   [EC2 Instance] 
        ├─────> [EBS Volume 1] 
        ├─────> [EBS Volume 2] 
        └─────> [EBS Volume 3] 

 ✅ 하나의 EBS는 여러 EC2에 동시 연결 불가 (오류!)

        [EBS Volume] 
       ▲      ▲      ▲
       │      │      │
 [EC2-1]  [EC2-2]  [EC2-3]   ❌ 불가능
```

---

## AZ와 EBS 가용성의 관계

EBS 볼륨은 생성 시 특정 AZ에 종속된다.
같은 AZ 내 EC2 인스턴스에만 EBS를 연결할 수 있으며, 다른 AZ에 있는 EC2에 연결하려면 스냅샷을 이용해 새로운 볼륨을 생성해야 한다.

예시:

* `ap-northeast-2a`에서 생성한 EBS는 같은 `2a`의 EC2만 연결 가능하다.
* `2b`의 EC2에서 사용하려면 스냅샷을 생성하고 해당 AZ에 새 볼륨을 만들어야 한다.

```
  AZ A                         AZ B
+-----------+              +-----------+
| EBS-A     |   ─────X──>  | EC2-B     |
| EC2-A     |              | EBS-B     |
+-----------+              +-----------+

※ EBS는 반드시 같은 AZ의 EC2에만 연결 가능하다.
```

---

## 스냅샷 기능 자세히 설명

1. **개념**

   * EBS의 현재 상태를 S3에 백업하는 기능이다. (S3에 직접 접근할 수는 없다)

2. **증분 백업**

   * 최초 1회는 전체 백업이며 이후에는 변경된 블록만 저장된다.
   * 스토리지 비용을 절감할 수 있다.

3. **복원 & 복제**

   * 스냅샷을 기반으로 언제든지 새 EBS 볼륨을 생성할 수 있다.
   * 이때 AZ를 지정할 수 있어 다른 AZ나 리전에 복제하는 데 사용된다.

4. **자동 백업**

   * Data Lifecycle Manager(DLM)를 통해 주기적으로 자동 스냅샷을 생성할 수 있다.
   * 보존 기간 및 자동 삭제 정책도 설정할 수 있다.

5. **암호화 연계**

   * 스냅샷은 원본 볼륨의 암호화 상태를 따른다.
   * 복원된 볼륨도 자동으로 암호화된다.

```
[ EBS Volume ]
      │
      ▼
 [ Snapshot in S3 ]
      │
      ▼
[ New EBS Volume in AZ B ]
```

---

## EBS 볼륨 유형

| 유형                             | 설명                         | 사용 예시         |
| ------------------------------ | -------------------------- | ------------- |
| gp3 (General Purpose SSD)      | 범용 SSD, 성능과 비용의 균형이 좋다     | 대부분의 일반 워크로드  |
| io2 / io2 Block Express        | 고성능 SSD, 높은 IOPS가 필요한 경우   | RDB, 대규모 트랜잭션 |
| st1 (Throughput Optimized HDD) | 처리량 중심의 HDD, 대용량 처리에 적합    | 로그, 빅데이터 처리   |
| sc1 (Cold HDD)                 | 저비용 HDD, 접근 빈도가 낮은 데이터에 적합 | 아카이빙, 백업      |

---

## 주요 기능 및 장점

1. **자동 복제**

   * 동일 AZ 내에서 EBS 볼륨은 자동으로 여러 물리 디스크에 복제되어 높은 내구성을 제공한다.

2. **탄력적인 크기 조정**

   * 사용 중인 볼륨도 중단 없이 크기 및 IOPS 변경이 가능하다.

3. **스냅샷 & 복원**

   * 스냅샷을 이용해 백업하거나 다른 리전에 복사한 뒤 복원할 수 있다.

4. **암호화**

   * AWS KMS를 통해 기본 또는 사용자 정의 키로 암호화할 수 있다.
   * 암호화된 볼륨은 생성되는 스냅샷도 자동으로 암호화된다.

5. **복수 볼륨 연결**

   * EC2 인스턴스 1대에 여러 개의 EBS를 연결하여 RAID 구성이 가능하다.

---

## 실제 사용 사례

1. **루트 디스크**

   * EC2의 운영체제가 설치된 기본 디스크로 사용된다.

2. **데이터 저장소**

   * DB, 로그, 이미지 등 중요한 데이터를 저장하는 데 활용된다.

3. **스냅샷 기반 백업/복원**

   * 정기적인 백업이나 재해복구(Disaster Recovery) 환경 구성 시 사용된다.

4. **다른 AZ/리전으로 복제**

   * 스냅샷을 복사하여 리전 간 백업 또는 이중화 구성이 가능하다.

---

## 요약

AWS EBS는 EC2 인스턴스에 연결되는 고성능, 고가용성, 고내구성 블록 스토리지다. SSD/HDD 기반 다양한 타입을 제공하며, 스냅샷, 암호화, 유연한 크기 조정 등 다양한 기능을 통해 거의 모든 클라우드 애플리케이션에서 핵심적인 역할을 수행한다.

또한, EBS는 특정 AZ에 귀속되며, EC2와 1:1 또는 1\:N 관계로 연결된다.
스냅샷을 활용하면 AZ/리전 간 복사 및 복원이 가능하므로, 백업 및 DR 전략에서도 중요한 구성 요소다.
