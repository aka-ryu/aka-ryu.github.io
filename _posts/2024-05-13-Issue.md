---
layout: post
title: 유저 조회 이슈
category: ISSUE
---

## 개요

BO 페이지에서 전체회원 리스트를 조회 시 15명씩 페이지네이션으로 처리하는데 13,14명이 조회되는 페이지가 발생하였다.
<br>

## 원인

개인정보 정책으로 인해 서비스에서는 회원의 최소한의 정보만 가진채 통합회원 서버에서 회원정보를 가지게 되는데 이때 서비스의 DB와 통합회원서버의 데이터 싱크가 맞지 않아 발생하는 오류

## 해결방안

통합회원 API 수정 및 DB회원, 통합회원의 싱크작업이 불가능 하다는 전제로 구상하였으며 기존 DB에서 15명의 회원데이터 SELECT 이후 통합API로 해당 회원들에 대한 유효성 검사를 하는 과정에서 부적격 데이터가 나와 15명이 되지 않으면 데이터를 추가하여 15명의 데이터를 만드는 방식으로 수정 및 부적격 판정을 받은 DB데이터의 경우 이후 추가적인 자원사용을 하지 않기 하기 위해 명시적 UserLevel 에 확인되지 않는 유저 등을 추가하여 자원 재사용 방지

```javascript
// 기존 회원 레벨
enum UserLervel {
    NON_MEMBER // 비회원
    ASSOCIATE_MEMBVER // 준회원
    TRIAL_MEMBER // 체험회원
    REGULAR_MEMBER // 정회원
    UNDEFINE_MEMBER // 추가하는 통합에서 조회되지 않는 회원
}
```

(구상 후 직접 개발하지 못하였음)
