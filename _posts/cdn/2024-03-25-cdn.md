---
layout: post
title: CDN - CDN 과 퍼지?
category: CDN
---

## 개요

현재 운영중인 웹사이트에서 콘텐츠 경로를 S3 스토리지를 직접 바라보던 상태에서  
CDN으로 도메인 변경을 하게 되었고 그로인해 기존 캐쉬에 대한 퍼지를 해야하는 컨텐츠가 발생할수도 있다고 전달받았다.

CDN 이란 단어자체도 생소했고 퍼지해야하는 것에 대해서도 정확하게  
어떤 작업인지, 왜 해야하는지도 모르는 상태에서 내가 처리해야하는 상황이라  
부랴부랴 CDN 과 퍼지가 무엇인지 정리해본다.
<br>

## CDN

```
Content Delivery Network 의 약자이다

일반적으로 웹사이트 혹은 게임등을 하는 경우에 한국 웹사이트, 한국 서버등에서는
반응이 빠른데 유럽이나 북미 등의 웹사이트나 게임을 하는 경우에는 뭔가
응답이 느리고 렉등이 발생한다.

통신속도가 빠르더라도 물리적인 거리가 멀 경우 요청을 하고 응답을 받는것에 시간이
많이 걸리게 되는 현상인 것이다.

이로 인해 유저경험은 안좋아지고, 유저의 이용율이 감소하게 되는것을 방지하기 위해
용량이 큰 이미지, 동영상 데이터를 미리 유럽, 아시아, 북미 등의 현지 서버에
미리 컨텐츠 데이터를 캐싱을 해두고 해당 지역에서 요청이 들어온 경우에 해당
요청 지역과 가까운 현지서버에서 미리 캐싱된 데이터를 응답해주는 방식이다.

물리적인 거리로 인해 어쩔수 없이 시간이 걸리던 이슈를 많이 단축시키는게 가능하다.
```

설명으로만 보기엔 좋은 기술로 보이지만 무조건 사용해야할 기술은 아닌것 같다.

**내 어플리케이션이 전세계를 대상으로 하지 않고 특정 지역만 서비스 한다면 굳이 필요하지 않다.**  
**CDN 서버를 유지해야하는데에도 당연히 비용이 들어간다.**

결국에는 이런기술도 존재하고 있다는걸 인지하고 내 서비스에 필요할 경우 상황에 맞게  
잘 사용하는게 정답인것 같다.  
<br>

## 퍼지

```
CDN 서버에 미리 캐싱해둔 컨텐츠를 원본 서버에서 수정,삭제 등의 상태를 변경하는
작업을 할 경우에도 미리 캐싱해둔 CDN 컨텐츠 데이터에는 해당 변경이 반영되지 않아
유저가 잘못된 컨텐츠를 응답받게 되는것을 방지하기 위해 기존 캐싱 데이터를 무효화
하는 작업을 말한다.

이후 유저가 CDN 에 해당 데이터를 요청하면

CDN서버가 해당 캐싱이 있는지 확인 -> 없으니 원본서버로 요청 -> 원본서버에서 받아온
데이터를 유저게에 응답 및 캐싱 -> 이후 요청은 캐싱된 데이터로 응답

과정으로 프로세스를 처리하게 된다.
```
