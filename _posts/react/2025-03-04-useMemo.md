---
layout: post
title: REACT - useMemo 장단점
category: REACT
---

# React.memo 사용 가이드

## 📌 React.memo란?
`React.memo`는 **컴포넌트의 불필요한 재렌더링을 방지**하여 성능을 최적화하는 방법입니다. 같은 props가 전달될 경우, 이전 결과를 재사용하여 렌더링을 건너뜁니다.

---

## ✅ `React.memo`의 장점
1. **불필요한 렌더링 방지**
   - 동일한 props를 받으면 다시 렌더링하지 않음.
   - 특히 부모 컴포넌트가 자주 리렌더링될 때 효과적.
   
2. **성능 최적화**
   - 리스트의 개별 아이템을 렌더링할 때 불필요한 리렌더링을 줄여 성능 개선.
   - CPU, 메모리 사용량 절약 가능.
   
3. **비싼 렌더링 비용을 줄일 수 있음**
   - 복잡한 UI 컴포넌트에서 렌더링 비용을 줄일 수 있음.

---

## ❌ `React.memo`의 단점
1. **비교 연산 비용 발생**
   - `memo`는 props가 변경되지 않았는지 `shallow comparison(얕은 비교)`를 수행.
   - 단순한 컴포넌트에서는 비교 비용이 오히려 더 클 수 있음.

2. **객체, 배열 props의 새로 생성 문제**
   - 부모 컴포넌트에서 객체/배열을 직접 넘길 경우, 매번 새로운 객체로 인식되어 `memo`의 효과가 사라짐.
   - 해결 방법: `useMemo` 또는 `useCallback`을 사용.

3. **`useState`, `useReducer`, `useContext`와 함께 사용 시 효과 제한**
   - 내부적으로 상태 변화가 있는 컴포넌트는 어차피 다시 렌더링됨.
   - `useContext` 값이 바뀌면 `memo`를 사용해도 리렌더링이 발생.

---

## 🎯 `React.memo`를 사용해야 하는 시점
✅ 다음과 같은 경우 `memo`를 적용하면 성능 최적화에 도움이 됩니다.

1. **항상 고정된 UI 요소**
   - 예: 로고, 네비게이션 바, 아이콘, 푸터 등 한 번 렌더링된 후 변경되지 않는 요소.

2. **부모 컴포넌트가 자주 리렌더링되지만, 자식 컴포넌트는 변할 필요가 없는 경우**
   - 부모의 상태가 변경될 때마다 불필요하게 자식이 렌더링되지 않도록 방지.

3. **리스트 성능 최적화 (`FlatList` 등)**
   - `FlatList`에서 `renderItem`을 최적화할 때 사용.
   - `memo`와 `useCallback`을 조합하면 더욱 효과적.

4. **렌더링 비용이 큰 컴포넌트**
   - 복잡한 UI 렌더링이 포함된 컴포넌트.
   - SVG, 차트, 애니메이션이 포함된 경우.

---

## 🚨 `React.memo`를 사용하지 않아야 하는 시점
❌ 다음과 같은 경우 `memo`를 사용해도 큰 효과가 없거나, 오히려 성능이 나빠질 수 있습니다.

1. **자주 변경되는 데이터나 상태를 가진 컴포넌트**
   - 예: 실시간 데이터 (주식 시세, 채팅, 스포츠 점수 등).
   - `memo`를 사용해도 어차피 props가 변경되므로 리렌더링을 막을 수 없음.

2. **매우 단순한 UI 컴포넌트**
   - 예: 기본적인 `Text`, `View`, `Image` 같은 요소.
   - `memo`의 비교 비용이 렌더링 비용보다 클 수 있음.

3. **props로 객체나 배열을 직접 전달하는 경우 (`useMemo` 없이)**
   - `{ items: [1, 2, 3] }` 같은 객체를 직접 넘기면 항상 새로운 값으로 인식되어 `memo`가 무의미함.
   - 해결 방법: `useMemo`를 사용하여 메모이제이션.

4. **`useContext`에서 값을 직접 전달받는 컴포넌트**
   - `useContext` 값이 변경되면 `memo`를 사용해도 리렌더링이 발생함.
   - 해결 방법: `useMemo`를 활용하여 컨텍스트 값을 최적화.

---

## 🔥 결론
- **"자주 바뀌는 데이터 → `memo` 필요 없음"**
- **"고정적인 UI 요소, 비싼 렌더링 → `memo` 효과적"**
- **최적화를 위해 `memo`를 무조건 적용하는 것이 아니라, 실제 렌더링 패턴을 분석한 후 적용할 것!** 🚀

