---
layout: post
title: AWS - EC2 스왑 메모리 추가
categories: AWS
---

## 개요

개발 환경에서 t2.micro 인스턴스를 사용하여 EC2를 구성하였으나, 기본 메모리(1GB)로 인해 약간의 부족 현상이 발생하였다.  
이를 해결하기 위해 스왑 메모리를 1GB 추가로 확보하여 메모리 부족 문제를 완화하였다.

## 원인

t2.micro 인스턴스는 기본적으로 1GB의 메모리를 제공하지만, EC2 기본 프로그램과 프로젝트 실행으로 인해 메모리가 부족한 상황이 발생하였다.  
특히, 여러 프로세스가 동시에 실행될 때 OOM(Out of Memory) 문제가 간헐적으로 발생하였다.

## 해결방안

### 1. 스왑 파일 생성
스왑 파일을 생성하여 추가 메모리를 확보하였다.

```bash
# 1GB 크기의 스왑 파일 생성
sudo fallocate -l 1G /swapfile

# 스왑 파일 권한 설정
sudo chmod 600 /swapfile

# 스왑 파일 포맷
sudo mkswap /swapfile

# 스왑 활성화
sudo swapon /swapfile
```

### 2. 스왑 활성화 확인
스왑 메모리가 정상적으로 활성화되었는지 확인하였다.

```bash
# 활성화된 스왑 확인
sudo swapon --show

# 전체 메모리 확인
free -h
```

### 3. 부팅 시 스왑 자동 활성화 설정
서버 재부팅 시에도 스왑이 활성화되도록 `/etc/fstab` 파일에 설정을 추가하였다.

```bash
# fstab 파일에 스왑 설정 추가
sudo sh -c 'echo "/swapfile none swap sw 0 0" >> /etc/fstab'
```

### 4. 동작 확인
스왑 메모리가 정상적으로 동작하는지 확인하였다.

```bash
# 메모리 사용량 확인
free -m

# 스왑 사용량 확인
vmstat 1
```

이를 통해 메모리 부족으로 인한 문제를 완화하고, 개발 환경에서 안정적으로 작업을 진행할 수 있었다.  
추후 필요에 따라 인스턴스 타입을 업그레이드하거나, 메모리 최적화를 추가로 진행할 예정이다.

(직접 구상 및 해결하였음)
